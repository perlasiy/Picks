<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Picks | Coleccionables</title>

  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
    rel="stylesheet"
  />

  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- TOP BAR -->
  <div class="top-bar text-center small py-1">
    <span>Env√≠os a todo M√©xico ‚Ä¢ Pagos seguros ‚Ä¢ Coleccionables originales</span>
  </div>

  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top main-navbar">
    <div class="container">
      <!-- Logo -->
      <a class="navbar-brand fw-bold" href="#">
        <span class="logo-icon">P</span>icks
      </a>

      <!-- DISPARADOR DEL BUSCADOR (HEADER) -->
      <button type="button" id="searchTrigger" class="search-trigger d-none d-lg-flex">
        <span class="search-icon">üîç</span>
        <span class="search-text">Buscar</span>
      </button>

      <!-- Bot√≥n hamburguesa -->
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Men√∫ -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-lg-center">

          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Inicio</a>
          </li>

          <!-- Ediciones especiales -->
          <li class="nav-item">
            <a class="nav-link" href="#ediciones-especiales">Ediciones especiales</a>
          </li>

          <!-- Fandom -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="fandomDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Fandom
            </a>
            <ul class="dropdown-menu" aria-labelledby="fandomDropdown">
              <li><a class="dropdown-item" href="#">Anime</a></li>
              <li><a class="dropdown-item" href="#">Manga</a></li>
              <li><a class="dropdown-item" href="musica.html">M√∫sica</a></li>
              <li><a class="dropdown-item" href="#">C√≥mics</a></li>
              <li><a class="dropdown-item" href="#">Caricaturas</a></li>
              <li><a class="dropdown-item" href="#">Pel√≠culas y Series</a></li>
            </ul>
          </li>

          <!-- Categor√≠a -->
          <li class="nav-item dropdown">
            <a
              class="nav-link dropdown-toggle"
              href="#"
              id="categoriaDropdown"
              role="button"
              data-bs-toggle="dropdown"
              aria-expanded="false"
            >
              Categor√≠a
            </a>
            <ul class="dropdown-menu" aria-labelledby="categoriaDropdown">
              <li><a class="dropdown-item" href="#">Figuras</a></li>
              <li><a class="dropdown-item" href="#">Cartas</a></li>
              <li><a class="dropdown-item" href="#">Llaveros</a></li>
              <li><a class="dropdown-item" href="#">Posters</a></li>
              <li><a class="dropdown-item" href="#">Accesorios</a></li>
              <li><a class="dropdown-item" href="#">C√≥mics</a></li>
            </ul>
          </li>

          <!-- Oferta -->
          <li class="nav-item">
            <a class="nav-link" href="#ofertas">Ofertas</a>
          </li>

          <!-- Correo (pago / newsletter) -->
          <li class="nav-item">
            <a class="nav-link" href="#correo">Correo</a>
          </li>

          <!-- Contacto -->
          <li class="nav-item">
            <a class="nav-link" href="#contacto">Contacto</a>
          </li>

          <!-- Carrito -->
          <li class="nav-item ms-lg-3">
            <button type="button" id="cartTrigger" class="btn btn-outline-secondary btn-sm cart-trigger">
              üõí <span id="cartCount">0</span>
            </button>
          </li>

          <!-- CTA -->
          <li class="nav-item ms-lg-3">
            <a href="#ofertas" class="btn btn-primary btn-sm">
              Ver colecci√≥n
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- OVERLAY COMPLETO DE B√öSQUEDA -->
  <div id="searchOverlay" class="search-overlay">
    <div class="search-overlay-backdrop"></div>

    <div class="search-overlay-content">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-12 col-lg-8">
            <div class="search-overlay-header">
              <span class="search-icon">üîç</span>
              <input
                id="searchInput"
                type="search"
                class="form-control search-overlay-input"
                placeholder="Buscar coleccionables por nombre, fandom o categor√≠a..."
                aria-label="Buscar"
              />
              <button
                type="button"
                id="searchClose"
                class="btn-close ms-2"
                aria-label="Cerrar"
              ></button>
            </div>
            <p class="search-overlay-helper">
              Ejemplos: ‚Äúfiguras anime‚Äù, ‚Äúcartas hologr√°ficas‚Äù, ‚Äúposter ciudad‚Äù, ‚Äúllaveros Marvel‚Äù.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CARRITO LATERAL DESPLEGABLE -->
  <div id="cartOverlay" class="cart-overlay">
    <div class="cart-backdrop"></div>

    <aside class="cart-panel">
      <div class="cart-header">
        <h2 class="cart-title">Tu carrito</h2>
        <button
          type="button"
          id="cartClose"
          class="btn-close"
          aria-label="Cerrar"
        ></button>
      </div>

      <div class="cart-body">
        <div id="cartItems" class="cart-items cart-items-empty">
          Tu carrito est√° vac√≠o.
        </div>
      </div>

      <div class="cart-footer">
        <div class="cart-total">
          <span>Total:</span>
          <span id="cartTotal">MXN$0.00</span>
        </div>
        <button class="btn btn-primary w-100" type="button">
          Ir a pagar
        </button>
      </div>
    </aside>
  </div>

  <!-- HERO PRINCIPAL -->
  <section class="hero-home">
    <div class="container-fluid px-0">
      <div class="row g-0">

        <!-- Panel promo -->
        <div class="col-12 col-lg-4 hero-panel d-flex flex-column justify-content-center">
          <div class="hero-panel-content">
            <p class="badge-cta mb-2">Coleccionistas Weekend</p>
            <h1 class="hero-title">
              50% menos<br />
              <span>+ env√≠o gratis</span>
            </h1>
            <p class="hero-subtitle">
              En figuras, cartas, posters y m√°s coleccionables seleccionados.
            </p>
            <div class="d-flex flex-wrap gap-2">
              <a href="#ofertas" class="btn btn-light btn-sm">
                Ver ofertas
              </a>
              <a href="#ediciones-especiales" class="btn btn-outline-light btn-sm">
                Ediciones especiales
              </a>
            </div>
            <p class="hero-note mt-3 mb-0">
              Promoci√≥n por tiempo limitado. Solo en l√≠nea.
            </p>
          </div>
        </div>

        <!-- Imagen / composici√≥n -->
        <div class="col-12 col-lg-8 hero-image-wrapper">
          <div class="hero-image-layer">
            <!-- agregar las imagenes -->
            <div class="hero-objects-grid">
              <div class="hero-card HC-1">Figuras de acci√≥n</div>
              <div class="hero-card HC-2">Cartas edici√≥n limitada</div>
              <div class="hero-card HC-3">Llaveros tem√°ticos</div>
              <div class="hero-card HC-4">Posters exclusivos</div>
              <div class="hero-card HC-5">Accesorios & C√≥mics</div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- STATS / BENEFICIOS -->
  <section class="py-4 stats-section">
    <div class="container">
      <div class="row text-center g-3">
        <div class="col-6 col-md-3">
          <div class="stat-item">
            <p class="stat-number">+6,000</p>
            <p class="stat-label">coleccionistas felices</p>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="stat-item">
            <p class="stat-number">+10,000</p>
            <p class="stat-label">piezas vendidas</p>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="stat-item">
            <p class="stat-number">4.9‚òÖ</p>
            <p class="stat-label">rese√±as promedio</p>
          </div>
        </div>
        <div class="col-6 col-md-3">
          <div class="stat-item">
            <p class="stat-number">100%</p>
            <p class="stat-label">productos originales</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- NOVEDADES -->
  <section class="novedades-section py-5">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-6">
          <h2 class="section-title">Novedades: ediciones especiales</h2>
          <p class="section-text">
            Descubre las nuevas piezas exclusivas inspiradas en tus universos favoritos:
            anime, videojuegos, Marvel, DC, m√∫sica y m√°s. Cada lanzamiento est√° pensado
            para coleccionistas que buscan algo √∫nico.
          </p>
          <a href="#ediciones-especiales" class="btn btn-primary">
            Ver novedades
          </a>
        </div>
        <div class="col-lg-6">
          <div class="novedades-card">
            <span class="tag">Nuevo</span>
            <h3>Bundle ‚ÄúUniverso Cruzado‚Äù</h3>
            <p>
              Set de figura + poster + llavero tem√°tico, en caja coleccionable numerada.
            </p>
            <button class="btn btn-outline-primary btn-sm">Ver detalle</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FANDOM CARDS -->
  <section class="fandom-section py-5">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-4">
          <div class="fandom-card fandom-anime">
            <h3>ANIME & MANGA</h3>
            <p>Figuras, nendoroids, cartas y m√°s inspiradas en tus series favoritas.</p>
            <a href="#" class="btn btn-light btn-sm">Explorar</a>
          </div>
        </div>
        <div class="col-md-4">
          <div class="fandom-card fandom-comics">
            <h3>C√ìMICS & H√âROES</h3>
            <p>Marvel, DC, c√≥mics cl√°sicos y modernos para todo coleccionista.</p>
            <a href="#" class="btn btn-light btn-sm">Explorar</a>
          </div>
        </div>
        <div class="col-md-4">
          <div class="fandom-card fandom-games">
            <h3>VIDEOJUEGOS & M√ÅS</h3>
            <p>Posters, accesorios, llaveros y coleccionables de tus juegos favoritos.</p>
            <a href="#" class="btn btn-light btn-sm">Explorar</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- BANNER COLAB / HISTORIA -->
  <section id="ediciones-especiales" class="banner-colab-section py-5">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-6">
          <img
            src="https://via.placeholder.com/600x360"
            alt="Colecci√≥n especial"
            class="img-fluid rounded-4 shadow-sm"
          />
        </div>
        <div class="col-lg-6">
          <h2 class="section-title">Colecciones especiales para fans de todas las edades</h2>
          <p class="section-text">
            Nuestra misi√≥n es acercar productos √∫nicos a cada coleccionista: desde cartas
            vintage hasta figuras reci√©n lanzadas, pasando por posters de edici√≥n limitada
            y accesorios personalizados.
          </p>
          <p class="section-text">
            Cada pieza es seleccionada por nuestro equipo para garantizar calidad,
            autenticidad y dise√±os incre√≠bles.
          </p>
          <a href="#ofertas" class="btn btn-primary">Ver colecci√≥n destacada</a>
        </div>
      </div>
    </div>
  </section>

  <!-- PRODUCTOS DESTACADOS / OFERTAS -->
  <section id="ofertas" class="productos-section py-5">
    <div class="container">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="section-title mb-0">Coleccionables destacados</h2>
        <a href="#" class="link-ver-todo">Ver todo</a>
      </div>

      <div class="row g-4">
        <!-- Producto 1 -->
        <div class="col-6 col-md-3">
          <div class="product-card"
               data-name="Figura Heroe de Fuego"
               data-tags="figura heroe fuego anime edicion limitada coleccionable">
            <div class="product-image"></div>
            <div class="product-body">
              <p class="product-tag">Figura</p>
              <h3 class="product-title">Figura ‚ÄúH√©roe de Fuego‚Äù</h3>
              <p class="product-meta">Edici√≥n limitada ‚Ä¢ 15 cm</p>
              <p class="product-price">
                MXN$529.50
                <span class="product-price-old">MXN$1,059</span>
              </p>
              <button
                type="button"
                class="btn btn-outline-primary btn-sm add-to-cart"
                data-id="prod-1"
                data-name="Figura H√©roe de Fuego"
                data-price="529.50"
              >
                A√±adir al carrito
              </button>
            </div>
          </div>
        </div>

        <!-- Producto 2 -->
        <div class="col-6 col-md-3">
          <div class="product-card"
               data-name="Deck Galaxy Legends"
               data-tags="cartas deck galaxy legends holograficas tcg juego coleccionable">
            <div class="product-image PI-2"></div>
            <div class="product-body">
              <p class="product-tag">Cartas</p>
              <h3 class="product-title">Deck ‚ÄúGalaxy Legends‚Äù</h3>
              <p class="product-meta">50 cartas hologr√°ficas</p>
              <p class="product-price">
                MXN$399.00
                <span class="product-price-old">MXN$799</span>
              </p>
              <button
                type="button"
                class="btn btn-outline-primary btn-sm add-to-cart"
                data-id="prod-2"
                data-name="Deck Galaxy Legends"
                data-price="399.00"
              >
                A√±adir al carrito
              </button>
            </div>
          </div>
        </div>

        <!-- Producto 3 -->
        <div class="col-6 col-md-3">
          <div class="product-card"
               data-name="Poster Ciudad Neon"
               data-tags="poster ciudad neon impresion hd pared decoracion">
            <div class="product-image PI-3"></div>
            <div class="product-body">
              <p class="product-tag">Poster</p>
              <h3 class="product-title">Poster ‚ÄúCiudad Neon‚Äù</h3>
              <p class="product-meta">Impresi√≥n HD ‚Ä¢ 50x70 cm</p>
              <p class="product-price">
                MXN$249.00
                <span class="product-price-old">MXN$499</span>
              </p>
              <button
                type="button"
                class="btn btn-outline-primary btn-sm add-to-cart"
                data-id="prod-3"
                data-name="Poster Ciudad Neon"
                data-price="249.00"
              >
                A√±adir al carrito
              </button>
            </div>
          </div>
        </div>

        <!-- Producto 4 -->
        <div class="col-6 col-md-3">
          <div class="product-card"
               data-name="Llavero Portal Estelar"
               data-tags="llavero portal estelar accesorio acrilico llaves anime sci-fi">
            <div class="product-image PI-4"></div>
            <div class="product-body">
              <p class="product-tag">Accesorio</p>
              <h3 class="product-title">Llavero ‚ÄúPortal Estelar‚Äù</h3>
              <p class="product-meta">Acr√≠lico doble cara</p>
              <p class="product-price">
                MXN$149.00
                <span class="product-price-old">MXN$299</span>
              </p>
              <button
                type="button"
                class="btn btn-outline-primary btn-sm add-to-cart"
                data-id="prod-4"
                data-name="Llavero Portal Estelar"
                data-price="149.00"
              >
                A√±adir al carrito
              </button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- BANNER FINAL -->
  <section class="banner-final py-5">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-7">
          <h2 class="banner-final-title">
            La casa de coleccionables<br />
            para la pr√≥xima generaci√≥n
          </h2>
          <p class="banner-final-text">
            Piezas √∫nicas, sin precios exagerados. Dise√±adas con pasi√≥n por el
            coleccionismo, pensadas para que disfrutes cada detalle: en tu repisa,
            en tu escritorio o donde t√∫ quieras.
          </p>
          <a href="#correo" class="btn btn-primary">Suscr√≠bete a las novedades</a>
        </div>
        <div class="col-lg-5">
          <div class="banner-final-visual">
            <div class="bf-item bf-1">Figura premium</div>
            <div class="bf-item bf-2">Poster exclusivo</div>
            <div class="bf-item bf-3">Accesorios creativos</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CORREO (Newsletter / Pagos) -->
  <section id="correo" class="correo-section py-5">
    <div class="container">
      <div class="row g-4 align-items-center">
        <div class="col-lg-6">
          <h3 class="section-title">Recibe ofertas y lanzamientos primero</h3>
          <p class="section-text">
            D√©janos tu correo para recibir preventas, cupones especiales y
            recordatorios de tus coleccionables favoritos.
          </p>
        </div>
        <div class="col-lg-6">
          <form class="newsletter-form d-flex flex-column flex-sm-row gap-2">
            <input
              type="email"
              class="form-control"
              placeholder="Tu correo electr√≥nico"
              required
            />
            <button type="submit" class="btn btn-primary">
              Suscribirme
            </button>
          </form>
          <small class="d-block mt-2 text-muted small">
            M√°s adelante aqu√≠ podr√°s iniciar sesi√≥n para pagar y ver tu historial de pedidos.
          </small>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contacto" class="contacto-section py-5 border-top">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-6">
          <h3 class="section-title">Contacto</h3>
          <p class="section-text">
            ¬øTienes dudas sobre un producto, tu pedido o quieres sugerir nuevas
            licencias y colecciones? Escr√≠benos.
          </p>
          <ul class="list-unstyled mb-0">
            <li><strong>Email:</strong> soporte@picks.mx</li>
            <li><strong>WhatsApp:</strong> +52 466 260 9360</li>
            <li><strong>Horario:</strong> Lun a Vie, 10:00 a 18:00 hrs</li>
          </ul>
        </div>
        <div class="col-md-6">
          <form class="contact-form">
            <div class="mb-3">
              <label for="nombre" class="form-label">Nombre</label>
              <input type="text" class="form-control" id="nombre" />
            </div>
            <div class="mb-3">
              <label for="correoContacto" class="form-label">Correo</label>
              <input type="email" class="form-control" id="correoContacto" />
            </div>
            <div class="mb-3">
              <label for="mensaje" class="form-label">Mensaje</label>
              <textarea class="form-control" id="mensaje" rows="3"></textarea>
            </div>
            <button type="submit" class="btn btn-outline-primary">
              Enviar mensaje
            </button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer py-4">
    <div class="container">
      <div class="row g-4">
        <div class="col-md-4">
          <h5 class="mb-3">Picks</h5>
          <p class="small mb-0">
            E-commerce especializado en figuras, cartas, posters, accesorios y
            m√°s coleccionables para fans de todas las edades.
          </p>
        </div>
        <div class="col-md-4">
          <h6>Navegaci√≥n</h6>
          <ul class="list-unstyled small">
            <li><a href="#ediciones-especiales">Ediciones especiales</a></li>
            <li><a href="#ofertas">Ofertas</a></li>
            <li><a href="#correo">Correo</a></li>
            <li><a href="#contacto">Contacto</a></li>
          </ul>
        </div>
        <div class="col-md-4">
          <h6>S√≠guenos</h6>
          <ul class="list-unstyled small">
            <li>Instagram</li>
            <li>Facebook</li>
            <li>X (Twitter)</li>
          </ul>
        </div>
      </div>
      <div class="text-center small mt-3 text-muted">
        ¬© 2025 Picks. Todos los derechos reservados.
      </div>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Script buscador + carrito -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      /* ========= BUSCADOR ========= */
      const searchTrigger  = document.getElementById("searchTrigger");
      const searchOverlay  = document.getElementById("searchOverlay");
      const searchInput    = document.getElementById("searchInput");
      const searchClose    = document.getElementById("searchClose");
      const productCards   = document.querySelectorAll(".product-card");

      /* ========= CARRITO ========= */
      const cartTrigger        = document.getElementById("cartTrigger");
      const cartOverlay        = document.getElementById("cartOverlay");
      const cartClose          = document.getElementById("cartClose");
      const cartItemsContainer = document.getElementById("cartItems");
      const cartTotalElement   = document.getElementById("cartTotal");
      const cartCountElement   = document.getElementById("cartCount");
      const addToCartButtons   = document.querySelectorAll(".add-to-cart");

      let cart = [];

      // Normaliza texto: min√∫sculas y sin acentos
      function normalize(str) {
        return str
          .toLowerCase()
          .normalize("NFD")
          .replace(/[\u0300-\u036f]/g, "");
      }

      /* ========= BUSCADOR: abrir/cerrar overlay ========= */
      function openSearchOverlay() {
        if (!searchOverlay) return;
        searchOverlay.classList.add("open");
        setTimeout(() => {
          if (searchInput) searchInput.focus();
        }, 50);
      }

      function closeSearchOverlay() {
        if (!searchOverlay) return;
        searchOverlay.classList.remove("open");
        if (searchInput) searchInput.value = "";
        // reset resultados
        productCards.forEach(card =>
          card.classList.remove("hidden-by-search")
        );
      }

      if (searchTrigger) {
        searchTrigger.addEventListener("click", openSearchOverlay);
      }

      if (searchClose) {
        searchClose.addEventListener("click", closeSearchOverlay);
      }

      if (searchOverlay) {
        searchOverlay.addEventListener("click", (e) => {
          if (e.target.classList.contains("search-overlay-backdrop")) {
            closeSearchOverlay();
          }
        });
      }

      // Filtrado de productos mientras se escribe
      if (searchInput) {
        searchInput.addEventListener("input", () => {
          const query = normalize(searchInput.value.trim());

          if (query === "") {
            productCards.forEach(card =>
              card.classList.remove("hidden-by-search")
            );
            return;
          }

          productCards.forEach(card => {
            const name = card.dataset.name || "";
            const tags = card.dataset.tags || "";
            const haystack = normalize(name + " " + tags);

            if (haystack.includes(query)) {
              card.classList.remove("hidden-by-search");
            } else {
              card.classList.add("hidden-by-search");
            }
          });
        });
      }

      /* ========= CARRITO: helpers ========= */
      function formatPrice(value) {
        return "MXN$" + value.toFixed(2);
      }

      function updateCartUI() {
        if (!cartItemsContainer || !cartTotalElement || !cartCountElement) return;

        if (cart.length === 0) {
          cartItemsContainer.classList.add("cart-items-empty");
          cartItemsContainer.innerHTML = "Tu carrito est√° vac√≠o.";
          cartTotalElement.textContent = "MXN$0.00";
          cartCountElement.textContent = "0";
          return;
        }

        cartItemsContainer.classList.remove("cart-items-empty");

        cartItemsContainer.innerHTML = cart
          .map(item => `
            <div class="cart-item" data-id="${item.id}">
              <div class="cart-item-info">
                <p class="cart-item-name">${item.name}</p>
                <p class="cart-item-price">${formatPrice(item.price)} x ${item.qty}</p>
              </div>
              <div class="cart-item-actions">
                <button type="button" class="cart-qty-btn cart-qty-minus" data-id="${item.id}">-</button>
                <span class="cart-qty">${item.qty}</span>
                <button type="button" class="cart-qty-btn cart-qty-plus" data-id="${item.id}">+</button>
                <button type="button" class="cart-remove" data-id="${item.id}">‚úï</button>
              </div>
            </div>
          `)
          .join("");

        const total = cart.reduce((sum, item) => sum + item.price * item.qty, 0);
        cartTotalElement.textContent = formatPrice(total);

        const count = cart.reduce((sum, item) => sum + item.qty, 0);
        cartCountElement.textContent = count.toString();
      }

      function openCart() {
        if (!cartOverlay) return;
        cartOverlay.classList.add("open");
      }

      function closeCart() {
        if (!cartOverlay) return;
        cartOverlay.classList.remove("open");
      }

      /* ========= CARRITO: eventos ========= */

      // Abrir carrito al hacer clic en el bot√≥n del navbar
      if (cartTrigger) {
        cartTrigger.addEventListener("click", () => {
          openCart();
        });
      }

      // Cerrar carrito con la X
      if (cartClose) {
        cartClose.addEventListener("click", closeCart);
      }

      // Cerrar carrito al hacer clic en el fondo oscuro
      if (cartOverlay) {
        cartOverlay.addEventListener("click", (e) => {
          if (e.target.classList.contains("cart-backdrop")) {
            closeCart();
          }
        });
      }

      // Botones "A√±adir al carrito"
      addToCartButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          const id = btn.dataset.id;
          const name = btn.dataset.name;
          const price = parseFloat(btn.dataset.price || "0");

          if (!id || !name) return;

          const existing = cart.find(item => item.id === id);
          if (existing) {
            existing.qty += 1;
          } else {
            cart.push({ id, name, price, qty: 1 });
          }

          updateCartUI();
          openCart();
        });
      });

      // Manejar +, -, eliminar dentro del carrito
      if (cartItemsContainer) {
        cartItemsContainer.addEventListener("click", (e) => {
          const target = e.target;
          const id = target.dataset.id;
          if (!id) return;

          const item = cart.find(i => i.id === id);
          if (!item) return;

          if (target.classList.contains("cart-qty-plus")) {
            item.qty += 1;
          } else if (target.classList.contains("cart-qty-minus")) {
            item.qty -= 1;
            if (item.qty <= 0) {
              cart = cart.filter(i => i.id !== id);
            }
          } else if (target.classList.contains("cart-remove")) {
            cart = cart.filter(i => i.id !== id);
          }

          updateCartUI();
        });
      }

      // Cerrar overlays con ESC
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          if (searchOverlay && searchOverlay.classList.contains("open")) {
            closeSearchOverlay();
          }
          if (cartOverlay && cartOverlay.classList.contains("open")) {
            closeCart();
          }
        }
      });

      // Inicializar contador
      updateCartUI();
    });
  </script>

</body>
</html>
